{% extends "base.html" %}
{% load bootstrap3 %}

{% block  title %}Docker管理{% endblock %}

{% block page-content %}
<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-lg-10">
        <h2>Docker管理</h2>
        <ol class="breadcrumb">
            <li><a href="{% url "index" %}">主页</a></li>
            <li><a>资产管理</a></li>
            <li class="active"><strong>Docker管理</strong></li>
        </ol>
    </div>
</div>
<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-lg-12">
            <div class="ibox float-e-margins">
                <div class="ibox-title"><h5>Docker主机</h5></div>
                <div class="ibox-content table-responsive">
                    <a href="{% url 'asset:docker_host_add' %}" class="btn btn-sm btn-primary">添加</a>
                    <a class="btn btn-sm btn-danger docker_host_all_del">批量删除</a>
                    <form id="del_form_docker_all" class="form-horizontal">
                        <table class="table table-striped table-bordered table-hover">
                            <thead><tr><th width="20"><input type="checkbox" id="CheckedAll"></th><th>名称</th><th>API地址</th><th>项目</th><th>业务</th><th>状态</th><th>动作</th></tr></thead>
                            <tbody>
                            {% for row in docker_list %}
                                <tr id="{{ row.id }}"><td><input type="checkbox" value="{{ row.id }}" name="id"></td><td>{{ row.name }}</td><td>{{ row.endpoint }}</td><td>{{ row.project }}</td><td>{{ row.business }}</td><td>{% if row.is_active %}<i class="fa fa-check text-navy"></i>{% else %}<i class="fa fa-times text-danger"></i>{% endif %}</td><td><a class="btn btn-primary btn-xs" href="{% url 'asset:docker_host_update' pk=row.id %}">编辑</a> <a class="btn btn-danger btn-xs docker_host_del">删除</a></td></tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% block footer-js %}
<script>
$(function () {
    $(document).on('click', '.docker_host_del', function () {
        var id = $(this).closest('tr').attr('id');
        $.post('/asset/docker-host-all-del.html', {'nid': id}, function () { window.location.reload(); });
    });
    $(document).on('click', '.docker_host_all_del', function () {
        $.post('/asset/docker-host-all-del.html', $('#del_form_docker_all').serialize(), function () { window.location.reload(); });
    });
});
</script>
{% endblock %}
{% endblock %}
